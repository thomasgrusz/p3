import{ctx}from"./engine.js";import{Enemy}from"./Enemy.js";import{Player}from"./Player.js";import{Collectible}from"./Collectible.js";import{Rock}from"./Rock.js";import{Timer}from"./Timer.js";export const app={pauseFlag:void 0,allEnemies:[],allCollectibles:[],allRocks:[]};app.random_number=(o,e)=>0===o?Math.floor(Math.random()*(e+1)):o+Math.floor(Math.random()*e),app.displayPanel=(o,e,r,t,l)=>{ctx.fillStyle=l,ctx.beginPath(),ctx.moveTo(o,e),ctx.lineTo(o+r,e),ctx.quadraticCurveTo(o+r+10,e,o+r+10,e+10),ctx.lineTo(o+r+10,e+t+10),ctx.quadraticCurveTo(o+r+10,e+t+20,o+r,e+t+20),ctx.lineTo(o,e+t+20),ctx.quadraticCurveTo(o-10,e+t+20,o-10,e+t+10),ctx.lineTo(o-10,e+10),ctx.quadraticCurveTo(o-10,e,o,e),ctx.fill()},app.displayPanelOutline=(o,e,r,t,l)=>{ctx.lineWidth=5,ctx.strokeStyle=l,ctx.beginPath(),ctx.moveTo(o,e),ctx.lineTo(o+r,e),ctx.quadraticCurveTo(o+r+10,e,o+r+10,e+10),ctx.lineTo(o+r+10,e+t+10),ctx.quadraticCurveTo(o+r+10,e+t+20,o+r,e+t+20),ctx.lineTo(o,e+t+20),ctx.quadraticCurveTo(o-10,e+t+20,o-10,e+t+10),ctx.lineTo(o-10,e+10),ctx.quadraticCurveTo(o-10,e,o,e),ctx.stroke()},app.isRock=(o,e)=>{var r=[!1,!1,!1,!1];return app.allRocks.forEach((function(t){o-1===t.xCoords.indexOf(t.x)&&e===t.yCoords.indexOf(t.y)&&(r[0]=!0),o+1===t.xCoords.indexOf(t.x)&&e===t.yCoords.indexOf(t.y)&&(r[1]=!0),o===t.xCoords.indexOf(t.x)&&e+1===t.yCoords.indexOf(t.y)&&(r[2]=!0),o===t.xCoords.indexOf(t.x)&&e-1===t.yCoords.indexOf(t.y)&&(r[3]=!0)})),r},app.overlap=(o,e)=>{if(e>0)for(var r=0;r<e;r++)if(o[e].x===o[r].x&&o[e].y===o[r].y)return!0;return!1},app.isGem=o=>{var e=!1;return app.allCollectibles.forEach((function(r){app.allRocks[o].xCoords.indexOf(app.allRocks[o].x)===r.xCoords.indexOf(r.x)&&app.allRocks[o].yCoords.indexOf(app.allRocks[o].y)===r.yCoords.indexOf(r.y)&&(e=!0)})),e};for(let o=1;o<=3;o++)app.allEnemies.push(new Enemy);for(let o=1;o<=2;o++)app.allCollectibles.push(new Collectible);for(let o=1;o<=2;o++)app.allRocks.push(new Rock);export const player=new Player;export const timer=new Timer;document.addEventListener("keydown",(o=>{player.handleInput({ArrowLeft:"left",ArrowUp:"up",ArrowRight:"right",ArrowDown:"down",Space:"space",Enter:"return"}[o.code])}));