import{Resources}from"./resources.js";import{ctx}from"./engine.js";import{app,player}from"./app.js";export class Player{constructor(){this.xCoords=[1,101,201,301,401],this.yCoords=[-11,72,155,238,321,404],this.xOrigin=this.xCoords[2],this.yOrigin=this.yCoords[5],this.leftBorder=this.xCoords[0],this.rightBorder=this.xCoords[4],this.upperBorder=this.yCoords[0],this.lowerBorder=this.yCoords[5],this.waterBorder=72,this.width=101,this.emptyPixelOffset=17,this.characters=["images/char-boy.png","images/char-cat-girl.png","images/char-horn-girl.png","images/char-pink-girl.png","images/char-princess-girl.png"],this.characterSelectedFlag=!1,this.startScreenDisplay=!0,this.startFirstGame=!1,this.selectorBoxXCoords=[40,130,215,310,400]}reset(){this.x=this.xOrigin,this.y=this.yOrigin,this.lives=3,this.alive=!0,this.score=0,this.selectorBox=0,this.anotherGameFlag=!1,this.gameWon=!1}update(){this.lives<=0&&(this.alive=!1),this.y<this.waterBorder&&(this.x=this.xOrigin,this.y=this.yOrigin,this.score+=10)}render(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y);for(let t=1;t<=this.lives;t++)ctx.drawImage(Resources.get("images/Heart.png"),40*t-30,525)}collisionDetect(t){for(let s=0;s<=5;s++)t.y===t.yCoords[s]&&this.y===this.yCoords[s]&&(t.x>this.x&&this.x+this.width-this.emptyPixelOffset>t.x&&(t.collisionFlag=!0),this.x>t.x&&t.x+t.width>this.x+this.emptyPixelOffset&&(t.collisionFlag=!0))}renderScore(){app.displayPanel(290,545,190,20,"lightgreen"),ctx.font="32pt Lobster",ctx.fillStyle="green",ctx.fillText("Score: ",290,580),ctx.fillText(player.score,400,580)}handleInput(t){if(!0===this.startScreenDisplay&&"return"===t&&(this.startFirstGame=!0),!1===this.characterSelectedFlag&&!1===this.startScreenDisplay&&("left"===t&&this.selectorBox>0?this.selectorBox=this.selectorBox-1:"left"===t&&0===this.selectorBox&&(this.selectorBox=4),"right"===t&&this.selectorBox<4?this.selectorBox=this.selectorBox+1:"right"===t&&4===this.selectorBox&&(this.selectorBox=0),"return"===t&&(this.characterSelectedFlag=!0,this.sprite=this.characters[this.selectorBox])),"return"!==t||!1!==this.alive&&!0!==this.gameWon||(this.anotherGameFlag=!0),"space"===t&&!0===this.characterSelectedFlag&&!0===this.alive&&!1===this.gameWon&&(app.pauseFlag=!app.pauseFlag),!0===this.characterSelectedFlag&&!1===app.pauseFlag){let s=app.isRock(this.xCoords.indexOf(this.x),this.yCoords.indexOf(this.y));"left"===t&&this.x>this.leftBorder&&!s[0]?this.x=this.xCoords[this.xCoords.indexOf(this.x)-1]:"right"===t&&this.x<this.rightBorder&&!s[1]?this.x=this.xCoords[this.xCoords.indexOf(this.x)+1]:"down"===t&&this.y<this.lowerBorder&&!s[2]?this.y=this.yCoords[this.yCoords.indexOf(this.y)+1]:"up"===t&&this.y>this.upperBorder&&!s[3]&&(this.y=this.yCoords[this.yCoords.indexOf(this.y)-1])}}}